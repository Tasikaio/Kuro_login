# 库街区登录Web界面使用指南

## 概述

本项目提供了一个现代化的Web界面来替代原有的CMD交互方式，让用户可以更直观、便捷地获取库街区登录Token。

## 功能特性

- 🎨 **现代化UI设计** - 直观的图形用户界面，替代命令行交互
- 📱 **响应式布局** - 支持桌面端和移动端访问
- 🔐 **安全认证** - 集成验证码处理和身份验证
- 📋 **Token管理** - 清晰的Token展示和复制功能
- ⚡ **实时反馈** - 友好的错误提示和加载状态
- 💾 **数据持久化** - 自动保存登录信息到本地存储

## 快速开始

### 方式一：使用启动脚本（推荐）

1. 确保已安装Python 3.8+环境
2. 运行启动脚本：
   ```bash
   python start_server.py
   ```
3. 脚本会自动：
   - 检查并安装所需依赖
   - 启动Web服务器
   - 打开浏览器访问界面

### 方式二：手动启动

1. 安装依赖：
   ```bash
   pip install -r requirements_web.txt
   ```

2. 启动服务器：
   ```bash
   python app.py
   ```

3. 打开浏览器访问：`http://127.0.0.1:5000`

## 使用步骤

### 1. 输入手机号码
- 在"手机号码"输入框中输入您的手机号
- 系统会自动验证手机号格式
- 支持中国大陆手机号（1开头，11位数字）

### 2. 获取验证码
- 点击"获取验证码"按钮
- 系统会处理验证码并发送短信
- 按钮会进入60秒倒计时状态

### 3. 输入验证码
- 查看手机收到的6位数字验证码
- 在"短信验证码"输入框中输入
- 系统会验证验证码格式

### 4. 登录获取Token
- 点击"登录获取Token"按钮
- 系统会进行身份验证
- 成功后显示Token信息

### 5. 管理Token
- **复制Token**：点击"复制Token"按钮
- **下载JSON**：点击"下载JSON文件"按钮
- **重新登录**：点击"重新登录"按钮

## 界面说明

### 登录区域
- **手机号码输入**：带格式验证的输入框
- **验证码获取**：带倒计时功能的按钮
- **登录按钮**：带加载动画的提交按钮

### Token展示区域
- **Token值**：可复制的长字符串
- **用户信息**：用户ID、角色信息等
- **操作按钮**：复制、下载、重新登录

### 提示系统
- **成功提示**：绿色Toast提示
- **错误提示**：红色Toast提示
- **自动隐藏**：3秒后自动消失

## 技术架构

### 前端技术栈
- **HTML5** - 页面结构
- **CSS3** - 样式和动画
- **JavaScript ES6+** - 交互逻辑
- **Fetch API** - 后端通信

### 后端技术栈
- **Flask** - Web框架
- **Flask-CORS** - 跨域支持
- **现有登录模块** - 验证码处理和API调用

### 数据流
```
用户界面 → JavaScript → Flask API → 库街区服务
```

## 安全特性

### 输入验证
- 手机号格式验证（正则表达式）
- 验证码格式验证（6位数字）
- 前端实时验证反馈

### 会话管理
- 基于session_id的会话跟踪
- 自动清理过期会话
- 防止重复提交

### 数据安全
- **Token内存临时存储** - Token仅在当前页面会话中临时存储，页面刷新后自动丢失
- **无本地持久化** - 不保存Token到浏览器本地存储，确保数据安全
- **敏感信息不记录日志** - 敏感信息不记录到日志文件
- **API请求参数验证** - 所有API请求都经过严格参数验证

## 错误处理

### 网络错误
- 连接失败提示
- 超时重试机制
- 服务状态检查

### 验证错误
- 手机号格式错误
- 验证码格式错误
- 会话过期提示

### API错误
- 验证码发送失败
- 登录认证失败
- 服务器内部错误

## 移动端适配

### 响应式设计
- 自适应不同屏幕尺寸
- 触摸友好的交互
- 移动端优化的布局

### 性能优化
- 图片和资源压缩
- 懒加载技术
- 缓存策略

## 开发说明

### 文件结构
```
Kuro_login/
├── index.html          # 主页面
├── styles.css          # 样式文件
├── script.js           # 前端逻辑
├── app.py              # Flask后端
├── start_server.py     # 启动脚本
├── requirements_web.txt # Web依赖
└── WEB_USAGE.md        # 本文档
```

### 自定义配置
编辑 `app.py` 文件中的配置项：
```python
DEBUG = True  # 调试模式
PORT = 5000   # 服务端口
HOST = '127.0.0.1'  # 绑定地址
```

### API接口
- `POST /api/send_sms` - 发送验证码
- `POST /api/login` - 用户登录
- `GET /api/health` - 健康检查

## 故障排除

### 常见问题

**Q: 无法启动服务器**
A: 检查Python版本和依赖安装

**Q: 页面无法访问**
A: 确认服务器正在运行，检查防火墙设置

**Q: 验证码发送失败**
A: 检查网络连接和手机号格式

**Q: 登录失败**
A: 确认验证码正确，检查会话是否过期

### 日志查看
服务器启动时会显示详细日志，包含：
- 依赖检查结果
- 服务启动状态
- API调用日志
- 错误信息详情

## 更新日志

### v1.0.0 (当前版本)
- 初始版本发布
- 完整的Web界面
- 响应式设计
- 安全认证集成

## 技术支持

如有问题请参考：
- 项目README.md
- 控制台错误信息
- 浏览器开发者工具

---

**注意**：请确保在使用前已阅读并理解项目的主要功能和限制。